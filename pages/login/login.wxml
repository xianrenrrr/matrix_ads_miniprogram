<!-- pages/login/login.wxml -->
<view class="login-container">
  <!-- 头部 Logo 区域 -->
  <view class="header-section">
    <view class="logo-container">
      <text class="logo-icon">🎬</text>
      <text class="logo-text">Matrix Ads</text>
    </view>
    <text class="subtitle">内容创作者专用</text>
  </view>

  <!-- 登录方式切换 -->
  <view class="login-method-tabs">
    <view 
      class="method-tab {{loginMethod === 'password' ? 'active' : ''}}"
      data-method="password"
      bindtap="switchLoginMethod"
    >
      <text class="tab-icon">🔑</text>
      <text class="tab-text">密码登录</text>
    </view>
    <view 
      class="method-tab {{loginMethod === 'qrcode' ? 'active' : ''}}"
      data-method="qrcode"
      bindtap="switchLoginMethod"
    >
      <text class="tab-icon">📱</text>
      <text class="tab-text">扫码注册</text>
    </view>
  </view>

  <!-- 登录表单区域 -->
  <view class="form-container">
    
    <!-- 用户名密码登录 -->
    <view wx:if="{{loginMethod === 'password'}}" class="password-login">
      <view class="form-group">
        <view class="input-group">
          <text class="input-icon">👤</text>
          <input 
            type="text"
            class="form-input"
            placeholder="请输入用户名"
            placeholder-class="input-placeholder"
            value="{{username}}"
            bindinput="onUsernameInput"
            maxlength="50"
          />
        </view>
      </view>

      <view class="form-group">
        <view class="input-group">
          <text class="input-icon">🔒</text>
          <input 
            type="{{showPassword ? 'text' : 'password'}}"
            class="form-input"
            placeholder="请输入密码"
            placeholder-class="input-placeholder"
            value="{{password}}"
            bindinput="onPasswordInput"
            maxlength="100"
          />
          <text 
            class="password-toggle {{showPassword ? 'active' : ''}}"
            bindtap="togglePasswordVisibility"
          >
            {{showPassword ? '👁️' : '👁️‍🗨️'}}
          </text>
        </view>
      </view>

      <view class="form-actions">
        <text class="forgot-password" bindtap="handleForgotPassword">忘记密码？</text>
      </view>

      <button 
        class="login-btn primary-btn {{loading ? 'loading' : ''}}"
        disabled="{{loading}}"
        bindtap="handlePasswordLogin"
      >
        <text wx:if="{{loading}}" class="loading-text">登录中...</text>
        <text wx:else>立即登录</text>
      </button>

      <view class="register-hint">
        <text class="hint-text">还没有账号？</text>
        <text class="register-link" bindtap="handleRegister">去网页端注册</text>
      </view>
    </view>

    <!-- 二维码扫描登录 -->
    <view wx:elif="{{loginMethod === 'qrcode'}}" class="qrcode-login">
      <view class="qr-instruction">
        <view class="instruction-icon">📱</view>
        <view class="instruction-title">扫码快速注册</view>
        <view class="instruction-steps">
          <view class="step-item">
            <text class="step-number">1</text>
            <text class="step-text">管理员生成邀请二维码</text>
          </view>
          <view class="step-item">
            <text class="step-number">2</text>
            <text class="step-text">获取邀请二维码后打开小程序</text>
          </view>
          <view class="step-item">
            <text class="step-number">3</text>
            <text class="step-text">使用下方按钮扫描注册</text>
          </view>
        </view>
      </view>

      <view class="qr-scan-area">
        <view class="scan-frame">
          <view class="scan-corner scan-corner-tl"></view>
          <view class="scan-corner scan-corner-tr"></view>
          <view class="scan-corner scan-corner-bl"></view>
          <view class="scan-corner scan-corner-br"></view>
          <text class="scan-hint">将二维码放入框内</text>
        </view>
      </view>

      <button 
        class="scan-btn primary-btn {{qrCodeScanning ? 'loading' : ''}}"
        disabled="{{qrCodeScanning}}"
        bindtap="handleQRCodeSignup"
      >
        <text wx:if="{{qrCodeScanning}}" class="loading-text">扫描中...</text>
        <text wx:else>📷 开始扫描</text>
      </button>

      <view class="qr-tips">
        <text class="tip-text">💡 提示：邀请二维码有效期为7天</text>
      </view>
    </view>
  </view>

  <!-- 帮助按钮 -->
  <view class="help-section">
    <text class="help-btn" bindtap="showHelp">❓ 注册帮助</text>
  </view>

  <!-- 底部信息 -->
  <view class="footer-section">
    <text class="footer-text">Matrix Ads © 2024</text>
    <text class="version-text">小程序版本 v1.0.0</text>
  </view>
</view>