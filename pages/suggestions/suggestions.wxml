<!-- pages/suggestions/suggestions.wxml -->
<view class="suggestions-container">
  <!-- 头部模板信息 -->
  <view wx:if="{{template}}" class="template-header">
    <view class="template-info">
      <text class="template-title" wx:if="{{template.templateTitle}}">{{template.templateTitle}}</text>
      <text class="template-desc" wx:if="{{template.targetAudience || template.tone}}">
        <text wx:if="{{template.targetAudience}}">{{template.targetAudience}}</text>
        <text wx:if="{{template.targetAudience && template.tone}}"> · </text>
        <text wx:if="{{template.tone}}">{{template.tone}}</text>
      </text>
    </view>
    <view class="template-stats" wx:if="{{template.totalVideoLength || (template.scenes && template.scenes.length)}}">
      <text wx:if="{{template.totalVideoLength}}" class="stat-item">{{template.totalVideoLength}}秒</text>
      <text wx:if="{{template.totalVideoLength && template.scenes && template.scenes.length}}" class="stat-divider">·</text>
      <text wx:if="{{template.scenes && template.scenes.length}}" class="stat-item">{{template.scenes.length}}场景</text>
    </view>
  </view>

  <!-- 说明文字 -->
  <view class="instructions">
    <text class="instruction-title">📹 选择您想要的视频内容</text>
    <text class="instruction-desc">点击选择建议场景，创建个性化录制方案</text>
  </view>

  <!-- 9宫格建议 -->
  <view class="suggestions-grid">
    <view 
      wx:for="{{suggestions}}" 
      wx:key="id"
      class="suggestion-card {{selectedSuggestions.includes(item.id) ? 'selected' : ''}}"
      data-id="{{item.id}}"
      bindtap="toggleSuggestion"
      bindlongpress="viewSuggestionDetail"
    >
      <!-- 网格编号 -->
      <view class="grid-number">{{item.id}}</view>
      
      <!-- 选中状态 -->
      <view wx:if="{{selectedSuggestions.includes(item.id)}}" class="selected-indicator">
        <text class="check-icon">✓</text>
      </view>
      
      <!-- 内容 -->
      <view class="suggestion-content">
        <view class="suggestion-icon">
          {{item.type === 'intro' ? '👋' : 
            item.type === 'product' ? '📦' :
            item.type === 'demo' ? '🎯' :
            item.type === 'review' ? '⭐' :
            item.type === 'price' ? '💰' :
            item.type === 'compare' ? '⚖️' :
            item.type === 'scenario' ? '🎬' :
            item.type === 'cta' ? '🛒' : '🙏'}}
        </view>
        <text class="suggestion-title">{{item.title}}</text>
        <text class="suggestion-desc">{{item.description}}</text>
        
        <!-- 时长标识 -->
        <view wx:if="{{item.duration}}" class="duration-badge">{{item.duration}}s</view>
      </view>
    </view>
  </view>

  <!-- 选择提示 -->
  <view wx:if="{{selectedSuggestions.length > 0}}" class="selection-info">
    <text class="selection-text">已选择 {{selectedSuggestions.length}} 个场景</text>
    <text class="estimated-time" wx:if="{{totalDuration}}">预计时长: {{totalDuration}}秒</text>
  </view>

  <!-- 底部操作按钮 -->
  <view class="action-buttons">
    <!-- 使用选中的建议 -->
    <button 
      wx:if="{{selectedSuggestions.length > 0}}"
      class="action-btn primary-btn"
      bindtap="startRecordingWithSuggestions"
    >
      开始录制 ({{selectedSuggestions.length}}个场景)
    </button>
    
    <!-- 使用原始模板 -->
    <button 
      class="action-btn secondary-btn"
      bindtap="useOriginalTemplate"
    >
      使用完整模板
    </button>
    
    <!-- 返回模板选择 -->
    <button 
      class="action-btn text-btn"
      bindtap="goBack"
    >
      重新选择模板
    </button>
  </view>

  <!-- 使用提示 -->
  <view class="usage-tips">
    <text class="tip-title">💡 使用提示:</text>
    <text class="tip-item">• 点击选择/取消场景</text>
    <text class="tip-item">• 长按查看详细说明</text>
    <text class="tip-item">• 建议选择3-6个场景</text>
  </view>
</view>