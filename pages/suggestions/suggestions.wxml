<!-- pages/suggestions/suggestions.wxml -->
<view class="suggestions-container">
  <!-- å¤´éƒ¨æ¨¡æ¿ä¿¡æ¯ -->
  <view wx:if="{{template}}" class="template-header">
    <view class="template-info">
      <text class="template-title" wx:if="{{template.templateTitle}}">{{template.templateTitle}}</text>
      <text class="template-desc" wx:if="{{template.targetAudience || template.tone}}">
        <text wx:if="{{template.targetAudience}}">{{template.targetAudience}}</text>
        <text wx:if="{{template.targetAudience && template.tone}}"> Â· </text>
        <text wx:if="{{template.tone}}">{{template.tone}}</text>
      </text>
    </view>
    <view class="template-stats" wx:if="{{template.totalVideoLength || (template.scenes && template.scenes.length)}}">
      <text wx:if="{{template.totalVideoLength}}" class="stat-item">{{template.totalVideoLength}}ç§’</text>
      <text wx:if="{{template.totalVideoLength && template.scenes && template.scenes.length}}" class="stat-divider">Â·</text>
      <text wx:if="{{template.scenes && template.scenes.length}}" class="stat-item">{{template.scenes.length}}åœºæ™¯</text>
    </view>
  </view>

  <!-- è¯´æ˜æ–‡å­— -->
  <view class="instructions">
    <text class="instruction-title">ğŸ“¹ é€‰æ‹©æ‚¨æƒ³è¦çš„è§†é¢‘å†…å®¹</text>
    <text class="instruction-desc">ç‚¹å‡»é€‰æ‹©å»ºè®®åœºæ™¯ï¼Œåˆ›å»ºä¸ªæ€§åŒ–å½•åˆ¶æ–¹æ¡ˆ</text>
  </view>

  <!-- 9å®«æ ¼å»ºè®® -->
  <view class="suggestions-grid">
    <view 
      wx:for="{{suggestions}}" 
      wx:key="id"
      class="suggestion-card {{selectedSuggestions.includes(item.id) ? 'selected' : ''}}"
      data-id="{{item.id}}"
      bindtap="toggleSuggestion"
      bindlongpress="viewSuggestionDetail"
    >
      <!-- ç½‘æ ¼ç¼–å· -->
      <view class="grid-number">{{item.id}}</view>
      
      <!-- é€‰ä¸­çŠ¶æ€ -->
      <view wx:if="{{selectedSuggestions.includes(item.id)}}" class="selected-indicator">
        <text class="check-icon">âœ“</text>
      </view>
      
      <!-- å†…å®¹ -->
      <view class="suggestion-content">
        <view class="suggestion-icon">
          {{item.type === 'intro' ? 'ğŸ‘‹' : 
            item.type === 'product' ? 'ğŸ“¦' :
            item.type === 'demo' ? 'ğŸ¯' :
            item.type === 'review' ? 'â­' :
            item.type === 'price' ? 'ğŸ’°' :
            item.type === 'compare' ? 'âš–ï¸' :
            item.type === 'scenario' ? 'ğŸ¬' :
            item.type === 'cta' ? 'ğŸ›’' : 'ğŸ™'}}
        </view>
        <text class="suggestion-title">{{item.title}}</text>
        <text class="suggestion-desc">{{item.description}}</text>
        
        <!-- æ—¶é•¿æ ‡è¯† -->
        <view wx:if="{{item.duration}}" class="duration-badge">{{item.duration}}s</view>
      </view>
    </view>
  </view>

  <!-- é€‰æ‹©æç¤º -->
  <view wx:if="{{selectedSuggestions.length > 0}}" class="selection-info">
    <text class="selection-text">å·²é€‰æ‹© {{selectedSuggestions.length}} ä¸ªåœºæ™¯</text>
    <text class="estimated-time" wx:if="{{totalDuration}}">é¢„è®¡æ—¶é•¿: {{totalDuration}}ç§’</text>
  </view>

  <!-- åº•éƒ¨æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <!-- ä½¿ç”¨é€‰ä¸­çš„å»ºè®® -->
    <button 
      wx:if="{{selectedSuggestions.length > 0}}"
      class="action-btn primary-btn"
      bindtap="startRecordingWithSuggestions"
    >
      å¼€å§‹å½•åˆ¶ ({{selectedSuggestions.length}}ä¸ªåœºæ™¯)
    </button>
    
    <!-- ä½¿ç”¨åŸå§‹æ¨¡æ¿ -->
    <button 
      class="action-btn secondary-btn"
      bindtap="useOriginalTemplate"
    >
      ä½¿ç”¨å®Œæ•´æ¨¡æ¿
    </button>
    
    <!-- è¿”å›æ¨¡æ¿é€‰æ‹© -->
    <button 
      class="action-btn text-btn"
      bindtap="goBack"
    >
      é‡æ–°é€‰æ‹©æ¨¡æ¿
    </button>
  </view>

  <!-- ä½¿ç”¨æç¤º -->
  <view class="usage-tips">
    <text class="tip-title">ğŸ’¡ ä½¿ç”¨æç¤º:</text>
    <text class="tip-item">â€¢ ç‚¹å‡»é€‰æ‹©/å–æ¶ˆåœºæ™¯</text>
    <text class="tip-item">â€¢ é•¿æŒ‰æŸ¥çœ‹è¯¦ç»†è¯´æ˜</text>
    <text class="tip-item">â€¢ å»ºè®®é€‰æ‹©3-6ä¸ªåœºæ™¯</text>
  </view>
</view>